<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>长沙飞狐充电数据分析</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 全局样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            color: #f0f0f0;
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* 头部样式 - 响应式优化 */
        .header {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 30, 60, 0.7);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            gap: 15px;
        }
        
        .title-container {
            text-align: center;
        }
        
        .title {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, #00c9ff, #92fe9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            line-height: 1.3;
        }
        
        .company {
            font-size: 0.9rem;
            color: #a0d2ff;
            margin-top: 5px;
        }
        
        .header-right {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .date-time {
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 15px;
            border-radius: 30px;
            font-family: 'Courier New', monospace;
            white-space: nowrap;
        }
        
        /* 标签页样式 - 响应式优化 */
        .tabs {
            display: flex;
            flex-wrap: wrap;
            background: rgba(0, 20, 40, 0.85);
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .tab {
            flex: 1 0 20%;
            min-width: 120px;
            padding: 14px 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            font-size: 0.9rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            color: #b0d0ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .tab i {
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .tab:hover {
            background: rgba(30, 100, 200, 0.3);
        }
        
        .tab.active {
            background: rgba(0, 150, 255, 0.25);
            color: #fff;
            box-shadow: inset 0 4px 8px rgba(0, 100, 200, 0.4);
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #00c9ff, #92fe9d);
        }
        
        /* 内容区域样式 */
        .content {
            display: none;
            background: rgba(0, 20, 40, 0.8);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(100, 180, 255, 0.15);
        }
        
        .content.active {
            display: block;
            animation: fadeIn 0.6s ease;
        }
        
        .content-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #70c1ff;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .content-title i {
            margin-right: 8px;
            background: linear-gradient(135deg, #00c9ff, #92fe9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .chart-container {
            background: rgba(0, 30, 60, 0.5);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(100, 180, 255, 0.1);
            height: 300px;
        }
        
        .chart-title {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: #a0d2ff;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .chart-title i {
            margin-right: 8px;
            color: #70c1ff;
        }
        
        .table-container {
            background: rgba(0, 30, 60, 0.5);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(100, 180, 255, 0.1);
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            min-width: 700px;
            border-collapse: collapse;
            border-spacing: 0;
        }
        
        th, td {
            padding: 10px 12px;
            text-align: center;
            border-bottom: 1px solid rgba(100, 180, 255, 0.15);
            font-size: 0.9rem;
        }
        
        th {
            background: rgba(0, 80, 160, 0.4);
            color: #70c1ff;
            font-weight: 600;
        }
        
        tr:nth-child(even) {
            background: rgba(0, 40, 80, 0.3);
        }
        
        tr:hover {
            background: rgba(0, 100, 200, 0.2);
        }
        
        .loss-rate {
            color: #ff6b6b;
            font-weight: 700;
        }
        
        .profit {
            color: #51cf66;
            font-weight: 700;
        }
        
        .highlight {
            background: rgba(0, 150, 255, 0.2);
            font-weight: 600;
        }
        
        /* 卡片样式 */
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .card {
            background: rgba(0, 40, 80, 0.6);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(100, 180, 255, 0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-3px);
            background: rgba(0, 60, 120, 0.7);
        }
        
        .card i {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #70c1ff;
        }
        
        .card-title {
            font-size: 0.9rem;
            color: #a0d2ff;
            margin-bottom: 8px;
        }
        
        .card-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: #fff;
            line-height: 1.2;
        }
        
        .card-unit {
            font-size: 0.8rem;
            color: #a0d2ff;
            margin-top: 5px;
        }
        
        /* 页脚样式 */
        .footer {
            text-align: center;
            margin-top: 25px;
            padding: 15px;
            color: #a0d2ff;
            font-size: 0.8rem;
            border-top: 1px solid rgba(100, 180, 255, 0.1);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 下载按钮样式 */
        .download-btn {
            display: inline-block;
            padding: 8px 15px;
            background: linear-gradient(135deg, #00c9ff, #92fe9d);
            color: #1a2a6c;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        .download-btn i {
            margin-right: 6px;
        }
        
        /* 登录框样式 */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .login-box {
            background: rgba(0, 20, 40, 0.95);
            border-radius: 15px;
            padding: 25px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(0, 150, 255, 0.3);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .login-header h2 {
            font-size: 1.6rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00c9ff, #92fe9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .login-header p {
            color: #a0d2ff;
            font-size: 0.9rem;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #70c1ff;
            font-size: 1rem;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(100, 180, 255, 0.3);
            background: rgba(0, 30, 60, 0.6);
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus {
            border-color: #00c9ff;
            box-shadow: 0 0 0 2px rgba(0, 201, 255, 0.3);
            outline: none;
        }
        
        .input-group input.locked {
            background: rgba(50, 50, 50, 0.5);
            cursor: not-allowed;
            color: #888;
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #00c9ff, #92fe9d);
            color: #1a2a6c;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .login-btn:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .error-message {
            color: #ff6b6b;
            text-align: center;
            margin-top: 15px;
            font-weight: 500;
            min-height: 20px;
            font-size: 0.9rem;
        }
        
        .lock-message {
            color: #ff9e6b;
            text-align: center;
            margin-top: 15px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .attempts-info {
            color: #a0d2ff;
            text-align: center;
            margin-top: 8px;
            font-size: 0.85rem;
        }
        
        /* 电脑端特定样式 */
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
            
            .header {
                flex-direction: row;
                margin-bottom: 25px;
                padding: 15px;
            }
            
            .title {
                font-size: 2.2rem;
            }
            
            .company {
                font-size: 1rem;
            }
            
            .header-right {
                flex-direction: row;
            }
            
            .date-time {
                font-size: 1rem;
            }
            
            .tabs {
                margin-bottom: 25px;
            }
            
            .tab {
                padding: 18px 10px;
                font-size: 1rem;
            }
            
            .tab i {
                font-size: 1.3rem;
                margin-right: 8px;
                margin-bottom: 0;
            }
            
            .content {
                padding: 25px;
            }
            
            .content-title {
                font-size: 1.6rem;
                margin-bottom: 25px;
                justify-content: flex-start;
            }
            
            .grid-container {
                grid-template-columns: 1fr 1fr;
                gap: 25px;
                margin-bottom: 25px;
            }
            
            .chart-container {
                padding: 20px;
                height: 350px;
            }
            
            .chart-title {
                font-size: 1.2rem;
                margin-bottom: 15px;
            }
            
            .table-container {
                padding: 20px;
            }
            
            th, td {
                padding: 12px 15px;
                font-size: 1rem;
            }
            
            .summary-cards {
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
                margin-top: 25px;
            }
            
            .card {
                padding: 20px;
            }
            
            .card i {
                font-size: 2rem;
            }
            
            .card-title {
                font-size: 1rem;
            }
            
            .card-value {
                font-size: 1.6rem;
            }
            
            .footer {
                margin-top: 30px;
                padding: 20px;
                font-size: 0.9rem;
            }
            
            .download-btn {
                font-size: 1rem;
                padding: 8px 20px;
            }
        }
        
        @media (min-width: 992px) {
            .title {
                font-size: 2.4rem;
            }
            
            .content-title {
                font-size: 1.8rem;
            }
            
            .chart-container {
                height: 380px;
            }
            
            .card-value {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- 登录覆盖层 -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-box">
            <div class="login-header">
                <h2><i class="fas fa-charging-station"></i> 充电运营数据分析平台</h2>
                <p>请输入用户名和密码访问系统</p>
            </div>
            <div class="input-group">
                <label for="username"><i class="fas fa-user"></i> 用户名</label>
                <input type="text" id="username" placeholder="请输入用户名" autocomplete="off">
            </div>
            <div class="input-group">
                <label for="password"><i class="fas fa-lock"></i> 密码</label>
                <input type="password" id="password" placeholder="请输入密码">
            </div>
            <button id="loginBtn" class="login-btn">登录系统</button>
            <div id="errorMessage" class="error-message"></div>
            <div id="lockMessage" class="lock-message" style="display: none;"></div>
            <div id="attemptsInfo" class="attempts-info"></div>
        </div>
    </div>
    
    <!-- 原始内容容器 -->
    <div class="container" id="mainContainer" style="display: none;">
        <div class="header">
            <div class="title-container">
                <div class="title">充电运营数据分析看板</div>
                <div class="company">长沙飞狐电动汽车充电服务有限公司 | 数据采集时间周期：2025年07月01日至07月31日</div>
            </div>
            <div class="header-right">
                <div class="date-time" id="datetime">2025年8月3日星期日 10:27:01</div>
                <a href="https://raw.githubusercontent.com/jiangnanwaw/my-drive/refs/heads/main/%E6%95%B0%E6%8D%AE(202507).rar" target="_blank" class="download-btn">
                    <i class="fas fa-download"></i> Download
                </a>
            </div>
        </div>
        
        <div class="tabs">
            <div class="tab" data-tab="basic">
                <i class="fas fa-plug"></i> 基础数据
            </div>
            <div class="tab" data-tab="purchase">
                <i class="fas fa-bolt"></i> 购电与损耗
            </div>
            <div class="tab active" data-tab="efficiency">
                <i class="fas fa-tachometer-alt"></i> 运营效率
            </div>
            <div class="tab" data-tab="profit">
                <i class="fas fa-chart-line"></i> 毛利核算
            </div>
            <div class="tab" data-tab="user">
                <i class="fas fa-users"></i> 用户行为
            </div>
        </div>
        
        <!-- 基础数据板块 -->
        <div class="content" id="basic-content">
            <div class="content-title">
                <i class="fas fa-plug"></i> 充电平台基础数据
            </div>
            
            <div class="grid-container">
                <div class="chart-container">
                    <div class="chart-title"><i class="fas fa-chart-bar"></i> 充电站核心指标对比</div>
                    <canvas id="basicChart" width="0" height="0" style="display: block; box-sizing: border-box; height: 0px; width: 0px;"></canvas>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>站点</th>
                                <th>充电电量 (kwh)</th>
                                <th>充电电费 (元)</th>
                                <th>充电服务费 (元)</th>
                                <th>充电时长 (小时)</th>
                                <th>订单数量</th>
                                <th>占位费 (元)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>四方坪站</td>
                                <td>392,265.07</td>
                                <td>221,959.25</td>
                                <td>125,360.45</td>
                                <td>11,007.58</td>
                                <td>15,695</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>高岭站</td>
                                <td>155,052.96</td>
                                <td>97,233.49</td>
                                <td>33,867.43</td>
                                <td>3,523.42</td>
                                <td>5,531</td>
                                <td>1,278.40</td>
                            </tr>
                            <tr class="highlight">
                                <td>总计</td>
                                <td>547,318.03</td>
                                <td>319,192.74</td>
                                <td>159,227.88</td>
                                <td>14,531.00</td>
                                <td>21,226</td>
                                <td>1,278.40</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="summary-cards">
                <div class="card">
                    <i class="fas fa-battery-full"></i>
                    <div class="card-title">总充电电量</div>
                    <div class="card-value">547,318.03 kwh</div>
                    <div class="card-unit">环比增长 18.87%</div>
                </div>
                <div class="card">
                    <i class="fas fa-clock"></i>
                    <div class="card-title">总充电时长</div>
                    <div class="card-value">14,531 小时</div>
                    <div class="card-unit">环比增长 16.56%</div>
                </div>
                <div class="card">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <div class="card-title">总服务费收入</div>
                    <div class="card-value">159,227.88 元</div>
                    <div class="card-unit">环比增长 16.97%</div>
                </div>
                <div class="card">
                    <i class="fas fa-list-alt"></i>
                    <div class="card-title">总订单数量</div>
                    <div class="card-value">21,226 笔</div>
                    <div class="card-unit">环比增长 17.11%</div>
                </div>
            </div>
        </div>
        
        <!-- 购电与损耗板块 -->
        <div class="content" id="purchase-content">
            <div class="content-title">
                <i class="fas fa-bolt"></i> 电力局购电与损耗
            </div>
            
            <div class="grid-container">
                <div class="chart-container">
                    <div class="chart-title"><i class="fas fa-chart-pie"></i> 电损率对比</div>
                    <canvas id="lossChart" height="0" style="display: block; box-sizing: border-box; height: 0px; width: 0px;" width="0"></canvas>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>站点</th>
                                <th>购电量 (kwh)</th>
                                <th>购电成本 (元)</th>
                                <th>总电损 (kwh)</th>
                                <th>日电损 (kwh)</th>
                                <th>电损率</th>
                                <th>购电平均电价 (元/kwh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>四方坪站</td>
                                <td>431,730</td>
                                <td>242,508.43</td>
                                <td>46,137.33</td>
                                <td>1,488.30</td>
                                <td class="loss-rate">10.69%</td>
                                <td>0.56</td>
                            </tr>
                            <tr>
                                <td>高岭站</td>
                                <td>171,420</td>
                                <td>106,668.71</td>
                                <td>16,367.04</td>
                                <td>527.97</td>
                                <td class="loss-rate">9.55%</td>
                                <td>0.62</td>
                            </tr>
                            <tr class="highlight">
                                <td>总计</td>
                                <td>603,150</td>
                                <td>349,177.14</td>
                                <td>62,504.37</td>
                                <td>2,016.27</td>
                                <td class="loss-rate">10.36%</td>
                                <td>0.58</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="summary-cards">
                <div class="card">
                    <i class="fas fa-plug-circle-bolt"></i>
                    <div class="card-title">总购电量</div>
                    <div class="card-value">603,150</div>
                    <div class="card-unit">kwh</div>
                </div>
                <div class="card">
                    <i class="fas fa-money-bill-wave"></i>
                    <div class="card-title">总购电成本</div>
                    <div class="card-value">349,177.14</div>
                    <div class="card-unit">元</div>
                </div>
                <div class="card">
                    <i class="fas fa-fire"></i>
                    <div class="card-title">总电损</div>
                    <div class="card-value">62,504.37</div>
                    <div class="card-unit">kwh</div>
                </div>
                <div class="card">
                    <i class="fas fa-percent"></i>
                    <div class="card-title">平均电损率</div>
                    <div class="card-value loss-rate">10.36%</div>
                    <div class="card-unit">电损比例</div>
                </div>
            </div>
        </div>
        
        <!-- 运营效率板块 -->
        <div class="content active" id="efficiency-content">
            <div class="content-title">
                <i class="fas fa-tachometer-alt"></i> 充电运营效率分析
            </div>
            
            <div class="grid-container">
                <div class="chart-container">
                    <div class="chart-title"><i class="fas fa-chart-radar"></i> 运营效率指标对比</div>
                    <canvas id="efficiencyChart" height="338" style="display: block; box-sizing: border-box; height: 338px; width: 619px;" width="619"></canvas>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>指标</th>
                                <th>四方坪站</th>
                                <th>高岭站</th>
                                <th>两站平均</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>单枪日均充电时长(小时)</td>
                                <td>2.77</td>
                                <td>3.16</td>
                                <td>2.86</td>
                            </tr>
                            <tr>
                                <td>单枪日均利用率</td>
                                <td>11.54%</td>
                                <td>13.17%</td>
                                <td>11.92%</td>
                            </tr>
                            <tr>
                                <td>单枪日均充电电量(kwh)</td>
                                <td>99.64</td>
                                <td>138.94</td>
                                <td>108.32</td>
                            </tr>
                            <tr>
                                <td>单枪日均充电收益(元)</td>
                                <td>31.84</td>
                                <td>30.35</td>
                                <td>31.51</td>
                            </tr>
                            <tr>
                                <td>平均每小时充电功率(kw)</td>
                                <td>35.64</td>
                                <td>44.01</td>
                                <td>37.67</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="summary-cards">
                <div class="card">
                    <i class="fas fa-charging-station"></i>
                    <div class="card-title">单枪日均充电时长</div>
                    <div class="card-value">2.86</div>
                    <div class="card-unit">小时</div>
                </div>
                <div class="card">
                    <i class="fas fa-battery-three-quarters"></i>
                    <div class="card-title">单枪日均充电电量</div>
                    <div class="card-value">108.32</div>
                    <div class="card-unit">kwh</div>
                </div>
                <div class="card">
                    <i class="fas fa-coins"></i>
                    <div class="card-title">单枪日均充电收益</div>
                    <div class="card-value">31.51</div>
                    <div class="card-unit">元</div>
                </div>
                <div class="card">
                    <i class="fas fa-bolt"></i>
                    <div class="card-title">平均充电功率</div>
                    <div class="card-value">37.67</div>
                    <div class="card-unit">kw</div>
                </div>
            </div>
        </div>
        
        <!-- 毛利核算板块 -->
        <div class="content" id="profit-content">
            <div class="content-title">
                <i class="fas fa-chart-line"></i> 充电毛利核算
            </div>
            
            <div class="grid-container">
                <div class="chart-container">
                    <div class="chart-title"><i class="fas fa-chart-area"></i> 收入与成本构成</div>
                    <canvas id="profitChart" height="0" style="display: block; box-sizing: border-box; height: 0px; width: 0px;" width="0"></canvas>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>站点</th>
                                <th>充电总收入(元)</th>
                                <th>充电总成本(元)</th>
                                <th>每kwh毛利(元)</th>
                                <th>毛利率</th>
                                <th>毛利润(元)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>四方坪站</td>
                                <td>347,319.70</td>
                                <td>254,213.68</td>
                                <td>0.26</td>
                                <td>26.81%</td>
                                <td class="profit">93,106.02</td>
                            </tr>
                            <tr>
                                <td>高岭站</td>
                                <td>132,379.32</td>
                                <td>107,687.79</td>
                                <td>0.17</td>
                                <td>18.65%</td>
                                <td class="profit">24,691.53</td>
                            </tr>
                            <tr class="highlight">
                                <td>总计</td>
                                <td>479,699.02</td>
                                <td>361,901.47</td>
                                <td>0.24</td>
                                <td>24.56%</td>
                                <td class="profit">117,797.55</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="summary-cards">
                <div class="card">
                    <i class="fas fa-money-bill"></i>
                    <div class="card-title">充电总收入</div>
                    <div class="card-value">479,699.02 元</div>
                    <div class="card-unit">环比增长 22.61%</div>
                </div>
                <div class="card">
                    <i class="fas fa-file-invoice"></i>
                    <div class="card-title">充电总成本</div>
                    <div class="card-value">361,901.47 元</div>
                    <div class="card-unit">环比增长 31.52%</div>
                </div>
                <div class="card">
                    <i class="fas fa-percent"></i>
                    <div class="card-title">平均毛利率</div>
                    <div class="card-value">24.56%</div>
                    <div class="card-unit">毛利率</div>
                </div>
                <div class="card">
                    <i class="fas fa-hand-holding-usd"></i>
                    <div class="card-title">总毛利润</div>
                    <div class="card-value profit">117,797.55 元</div>
                    <div class="card-unit">环比增长 1.5%</div>
                </div>
            </div>
        </div>
        
        <!-- 用户行为板块 -->
        <div class="content" id="user-content">
            <div class="content-title">
                <i class="fas fa-users"></i> 用户行为分析
            </div>
            
            <div class="grid-container">
                <div class="chart-container">
                    <div class="chart-title"><i class="fas fa-chart-line"></i> 充电时段分布</div>
                    <canvas id="userChart" height="0" style="display: block; box-sizing: border-box; height: 0px; width: 0px;" width="0"></canvas>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>站点</th>
                                <th>尖时段占比</th>
                                <th>峰时段占比</th>
                                <th>平时段占比</th>
                                <th>谷时段占比</th>
                                <th>进站车辆数</th>
                                <th>充电车辆数</th>
                                <th>进站车辆充电率</th>
                                <th>充电完成率</th>
                                <th>超时占位率</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>四方坪站</td>
                                <td>3.12%</td>
                                <td>4.72%</td>
                                <td>36.10%</td>
                                <td>56.07%</td>
                                <td>20,000</td>
                                <td>15,726</td>
                                <td>78.63%</td>
                                <td>53.73%</td>
                                <td>/</td>
                            </tr>
                            <tr>
                                <td>高岭站</td>
                                <td>4.30%</td>
                                <td>7.74%</td>
                                <td>42.27%</td>
                                <td>45.70%</td>
                                <td>6,768</td>
                                <td>5,547</td>
                                <td>81.96%</td>
                                <td>37.22%</td>
                                <td>21.55%</td>
                            </tr>
                            <tr class="highlight">
                                <td>两站平均</td>
                                <td>3.71%</td>
                                <td>6.23%</td>
                                <td>39.19%</td>
                                <td>50.89%</td>
                                <td>13,384</td>
                                <td>10,636.5</td>
                                <td>80.30%</td>
                                <td>45.48%</td>
                                <td>21.55%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="summary-cards">
                <div class="card">
                    <i class="fas fa-car"></i>
                    <div class="card-title">总进站车辆数</div>
                    <div class="card-value">26,768</div>
                    <div class="card-unit">辆</div>
                </div>
                <div class="card">
                    <i class="fas fa-car-battery"></i>
                    <div class="card-title">总充电车辆数</div>
                    <div class="card-value">21,273</div>
                    <div class="card-unit">辆</div>
                </div>
                <div class="card">
                    <i class="fas fa-percentage"></i>
                    <div class="card-title">平均充电率</div>
                    <div class="card-value">79.47%</div>
                    <div class="card-unit">进站车辆充电率</div>
                </div>
                <div class="card">
                    <i class="fas fa-clock"></i>
                    <div class="card-title">谷时段充电占比</div>
                    <div class="card-value">50.89%</div>
                    <div class="card-unit">比例</div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>数据更新时间：2025年08月02日 | 长沙飞狐电动汽车充电服务有限公司 © 2025 版权所有</p>
        </div>
    </div>
    
    <script>
        // 登录系统逻辑
        document.addEventListener('DOMContentLoaded', function() {
            const CORRECT_USERNAME = "admin";
            const CORRECT_PASSWORD = "fh123$%^";
            const MAX_ATTEMPTS = 3;
            const LOCK_TIME = 5 * 60 * 1000; // 5分钟锁定时间
            
            const loginOverlay = document.getElementById('loginOverlay');
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const loginBtn = document.getElementById('loginBtn');
            const errorMessage = document.getElementById('errorMessage');
            const lockMessage = document.getElementById('lockMessage');
            const attemptsInfo = document.getElementById('attemptsInfo');
            const mainContainer = document.getElementById('mainContainer');
            
            let attempts = parseInt(localStorage.getItem('loginAttempts') || 0);
            let lockEndTime = parseInt(localStorage.getItem('lockEndTime') || 0);
            let lockTimer = null;
            
            // 检查是否在锁定状态
            function checkLockStatus() {
                const now = Date.now();
                if (lockEndTime > now) {
                    // 锁定状态
                    const remaining = Math.ceil((lockEndTime - now) / 1000);
                    lockMessage.textContent = `您已连续多次输入错误，系统被锁定。请等待 ${formatTime(remaining)} 分钟后重试。`;
                    lockMessage.style.display = 'block';
                    errorMessage.textContent = '';
                    
                    // 禁用输入和按钮
                    usernameInput.disabled = true;
                    passwordInput.disabled = true;
                    usernameInput.classList.add('locked');
                    passwordInput.classList.add('locked');
                    loginBtn.disabled = true;
                    
                    // 启动倒计时
                    startCountdown(remaining);
                    return true;
                } else {
                    // 清除锁定状态
                    localStorage.removeItem('lockEndTime');
                    lockMessage.style.display = 'none';
                    
                    // 启用输入和按钮
                    usernameInput.disabled = false;
                    passwordInput.disabled = false;
                    usernameInput.classList.remove('locked');
                    passwordInput.classList.remove('locked');
                    loginBtn.disabled = false;
                    
                    // 更新尝试次数显示
                    updateAttemptsInfo();
                    return false;
                }
            }
            
            // 格式化时间显示
            function formatTime(seconds) {
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
            }
            
            // 启动倒计时
            function startCountdown(seconds) {
                let remaining = seconds;
                
                lockTimer = setInterval(() => {
                    remaining--;
                    if (remaining <= 0) {
                        clearInterval(lockTimer);
                        checkLockStatus(); // 重新检查锁定状态
                    } else {
                        lockMessage.textContent = `您已连续多次输入错误，系统被锁定。请等待 ${formatTime(remaining)} 分钟后重试。`;
                    }
                }, 1000);
            }
            
            // 更新尝试次数显示
            function updateAttemptsInfo() {
                if (attempts > 0) {
                    attemptsInfo.textContent = `您还有 ${MAX_ATTEMPTS - attempts} 次尝试机会`;
                } else {
                    attemptsInfo.textContent = '';
                }
            }
            
            // 登录验证
            function login() {
                const username = usernameInput.value.trim();
                const password = passwordInput.value;
                
                if (!username || !password) {
                    errorMessage.textContent = '用户名和密码不能为空';
                    return;
                }
                
                if (username === CORRECT_USERNAME && password === CORRECT_PASSWORD) {
                    // 登录成功
                    localStorage.removeItem('loginAttempts');
                    localStorage.removeItem('lockEndTime');
                    loginOverlay.style.display = 'none';
                    mainContainer.style.display = 'block';
                    errorMessage.textContent = '';
                    
                    // 初始化页面功能
                    initializePage();
                } else {
                    // 登录失败
                    attempts++;
                    localStorage.setItem('loginAttempts', attempts);
                    
                    if (attempts >= MAX_ATTEMPTS) {
                        // 达到最大尝试次数，锁定系统
                        lockEndTime = Date.now() + LOCK_TIME;
                        localStorage.setItem('lockEndTime', lockEndTime);
                        checkLockStatus();
                    } else {
                        errorMessage.textContent = '用户名或密码输入错误';
                        updateAttemptsInfo();
                    }
                }
            }
            
            // 初始化页面功能
            function initializePage() {
                // 更新时间显示
                updateDateTime();
                setInterval(updateDateTime, 1000);
                
                // 标签切换功能
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        // 移除所有活动状态
                        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
                        
                        // 添加当前活动状态
                        tab.classList.add('active');
                        const tabId = tab.getAttribute('data-tab');
                        document.getElementById(`${tabId}-content`).classList.add('active');
                    });
                });
                
                 // 初始化图表（这里保留原图表的初始化代码）
                // 基础数据图表
                const basicCtx = document.getElementById('basicChart').getContext('2d');
                new Chart(basicCtx, {
                    type: 'bar',
                    data: {
                        labels: ['四方坪站', '高岭站'],
                        datasets: [
                            {
                                label: '充电电量 (kwh)',
                                data: [392265.07, 155052.96],
                                backgroundColor: 'rgba(54, 162, 235, 0.7)',
                                borderColor: 'rgba(54, 162, 235, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '充电电费 (元)',
                                data: [221959.25, 97233.49],
                                backgroundColor: 'rgba(255, 99, 132, 0.7)',
                                borderColor: 'rgba(255, 99, 132, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '充电服务费 (元)',
                                data: [125360.45, 33867.43],
                                backgroundColor: 'rgba(75, 192, 192, 0.7)',
                                borderColor: 'rgba(75, 192, 192, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#a0d2ff'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: '#a0d2ff'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#a0d2ff'
                                }
                            }
                        }
                    }
                });
                
                // 电损率图表
        const lossCtx = document.getElementById('lossChart').getContext('2d');
        new Chart(lossCtx, {
            type: 'doughnut',
            data: {
                labels: ['四方坪站电损率', '四方坪站有效电量', '高岭站电损率', '高岭站有效电量'],
                datasets: [{
                    data: [10.69, 89.31, 9.55, 90.45],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.8)',
                        'rgba(54, 162, 235, 0.8)',
                        'rgba(255, 99, 132, 0.6)',
                        'rgba(54, 162, 235, 0.6)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            color: '#a0d2ff'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.raw + '%';
                            }
                        }
                    }
                }
            }
        });
        
        // 运营效率图表
        const efficiencyCtx = document.getElementById('efficiencyChart').getContext('2d');
        new Chart(efficiencyCtx, {
            type: 'radar',
            data: {
                labels: ['日均充电时长(小时)', '日均利用率', '日均充电电量(kwh)', '日均充电收益(元)', '平均充电功率(kw)'],
                datasets: [
                    {
                        label: '四方坪站',
                        data: [2.77, 11.54, 99.64, 31.84, 35.64],
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        pointBackgroundColor: 'rgba(54, 162, 235, 1)',
                        pointBorderColor: '#fff'
                    },
                    {
                        label: '高岭站',
                        data: [3.16, 13.17, 138.94, 30.35, 44.01],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        pointBackgroundColor: 'rgba(255, 99, 132, 1)',
                        pointBorderColor: '#fff'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        pointLabels: {
                            color: '#a0d2ff'
                        },
                        ticks: {
                            backdropColor: 'transparent',
                            color: '#a0d2ff'
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: '#a0d2ff'
                        }
                    }
                }
            }
        });
        
        // 毛利核算图表
        const profitCtx = document.getElementById('profitChart').getContext('2d');
        new Chart(profitCtx, {
            type: 'bar',
            data: {
                labels: ['四方坪站', '高岭站'],
                datasets: [
                    {
                        label: '充电总收入',
                        data: [347319.70, 132379.32],
                        backgroundColor: 'rgba(75, 192, 192, 0.7)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    },
                    {
                        label: '充电总成本',
                        data: [254213.68, 107687.79],
                        backgroundColor: 'rgba(255, 99, 132, 0.7)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    },
                    {
                        label: '毛利润',
                        data: [93106.02, 24691.53],
                        backgroundColor: 'rgba(75, 192, 75, 0.7)',
                        borderColor: 'rgba(75, 192, 75, 1)',
                        borderWidth: 1,
                        type: 'line',
                        fill: false
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#a0d2ff'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#a0d2ff'
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: '#a0d2ff'
                        }
                    }
                }
            }
        });
        
        // 用户行为图表
        const userCtx = document.getElementById('userChart').getContext('2d');
        new Chart(userCtx, {
            type: 'line',
            data: {
                labels: ['00:00-02:00', '02:00-04:00', '04:00-06:00', '06:00-08:00', '08:00-10:00', 
                         '10:00-12:00', '12:00-14:00', '14:00-16:00', '16:00-18:00', '18:00-20:00', 
                         '20:00-22:00', '22:00-24:00'],
                datasets: [
                    {
                        label: '四方坪站充电量(kwh)',
                        data: [85453.16, 28435.26, 32438.72, 46834.81, 12633.32, 21508.15, 10454.22, 43489.33, 59481.78, 10723.4, 5919.41, 34893.51],
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: '高岭站充电量(kwh)',
                        data: [26326.72, 4475.96, 3582.4, 21368.5, 10134.58, 14477.18, 6346.76, 16864.09, 23142.85, 7466.08, 2217.35, 18650.49],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.4,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#a0d2ff'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#a0d2ff'
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: '#a0d2ff'
                        }
                    }
                }
            }
        });
         }
          
         // 更新时间显示
            function updateDateTime() {
                const now = new Date();
                const options = { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    weekday: 'long',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                };
                document.getElementById('datetime').textContent = now.toLocaleDateString('zh-CN', options);
            }
            
            // 初始检查锁定状态
            if (checkLockStatus()) {
                // 如果处于锁定状态，不需要进一步设置事件监听器
                return;
            }
            
            // 设置登录按钮事件
            loginBtn.addEventListener('click', login);
            
            // 设置回车键登录
            passwordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    login();
                }
            });
            
            // 更新尝试次数显示
            updateAttemptsInfo();
        });
    </script>
</body>
</html>